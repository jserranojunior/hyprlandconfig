##########################
# Vari√°veis de Ambiente  #
##########################

env = XDG_CURRENT_DESKTOP,Hyprland
env = XDG_SESSION_TYPE,wayland
env = GDK_BACKEND,wayland
env = CLUTTER_BACKEND,wayland
env = SDL_VIDEODRIVER,wayland
env = MOZ_ENABLE_WAYLAND,1
env = QT_QPA_PLATFORM,wayland

##########################
# Execu√ß√µes Autom√°ticas  #
##########################

exec-once = dbus-update-activation-environment --systemd WAYLAND_DISPLAY XDG_CURRENT_DESKTOP
exec-once = systemctl --user import-environment WAYLAND_DISPLAY XDG_CURRENT_DESKTOP
exec-once = /usr/lib/polkit-kde-authentication-agent-1
exec-once = lxpolkit
exec-once = hyprpaper -c ~/.config/hypr/hyprpaper.conf

exec-once = swaync
exec-once = nm-applet --indicator
exec-once = blueman-applet
exec-once = hypridle
# exec = /opt/hyprlandconfig/scripts/cdrom-monitor.sh &
  
# exec = activate-linux &

##########################
# Monitores e Workspaces #
##########################

monitor = DP-3,3440x1440@159.96,0x0,1

workspace = 1, monitor:Virtual-1
workspace = 2, monitor:Virtual-1
workspace = 3, monitor:Virtual-1
#monitor=,preferred,auto,1


##########################
# Configura√ß√µes Input    #
##########################

input {
    kb_layout = br  # Mude para "us" se usar teclado ingl√™s
    follow_mouse = 1
}


##########################
# Configura√ß√µes Gerais   #
##########################

general {
    gaps_in = 5
    gaps_out = 10
    border_size = 2
    col.active_border = rgba(5e2a84ff) rgba(003366ff) 45deg
    col.inactive_border = rgba(003366ff)
    layout = dwindle
}

decoration {
    rounding = 20
        blur {
        enabled = yes
        size = 8
        passes = 2
        new_optimizations = on
    }
    shadow {
        enabled = true
        range = 20
        render_power = 3
        color = rgba(000000aa)
    }
    
    
}

render {
    direct_scanout = true
    
}




animations {
    enabled = yes
    bezier = myBezier, 0.05, 0.9, 0.1, 1.05
    animation = windows, 1, 7, myBezier
    animation = windowsOut, 1, 7, default, popin 80%
    animation = border, 1, 10, default
    animation = borderangle, 1, 8, default
    animation = fade, 1, 7, default
    animation = workspaces, 1, 6, default
}

windowrulev2 = idleinhibit fullscreen, fullscreen:1




##########################
# Atalhos: Aplicativos   #
##########################

bind = SUPER, W, exec, kitty --hold -e /opt/hyprlandconfig/scripts/wallpaper.sh
bind = SUPER, Return, exec, foot
bind = SUPER, P, exec, pavucontrol
bind = SUPER, C, exec, code
bind = SUPER, S, exec, steam
bind = SUPER, N, exec, brave --password-store=basic
bind = SUPER, T, exec, thunar
bind = SUPER, k, exec, warp-terminal
bind = SUPER, L, exec, wlogout
bind = SUPER, D, exec, wofi --show drun
bind = SUPER, B, exec, /opt/hyprlandconfig/scripts/toggle-waybar.sh


##########################
# Atalhos: Janelas       #
##########################

bind = SUPER, Q, killactive,
bind = SUPER, M, exit,
bind = SUPER, V, togglefloating,
bind = SUPER, F, fullscreen
bind = SUPER SHIFT, F, togglefloating

bind = SUPER, 1, workspace, 1
bind = SUPER, 2, workspace, 2
bind = SUPER, 3, workspace, 3
bind = SUPER, 4, workspace, 4
bind = SUPER, 5, workspace, 5

bind = SUPER SHIFT, 1, movetoworkspace, 1
bind = SUPER SHIFT, 2, movetoworkspace, 2
bind = SUPER SHIFT, 3, movetoworkspace, 3
bind = SUPER SHIFT, 4, movetoworkspace, 4
bind = SUPER SHIFT, 5, movetoworkspace, 5

bind = SUPER, TAB, exec, /opt/hyprlandconfig/scripts/navigate_workpaces.sh

bindm = SUPER, mouse:272, movewindow
bindm = SUPER, mouse:273, resizewindow


##########################
# Atalhos: √Åudio e Vol.  #
##########################

bind = SUPER, A, exec, /opt/hyprlandconfig/scripts/toggle-audio.sh
bind = SUPER ALT, equal, exec, wpctl set-volume @DEFAULT_AUDIO_SINK@ 5%+ && notify-send "Volume" "$(wpctl get-volume @DEFAULT_AUDIO_SINK@)"
bind = SUPER ALT, minus, exec, wpctl set-volume @DEFAULT_AUDIO_SINK@ 5%- && notify-send "Volume" "$(wpctl get-volume @DEFAULT_AUDIO_SINK@)"


##########################
# Atalhos: Soundboard    #
##########################

bind = SUPER ALT, 2, exec, paplay --device=MonitorSink /opt/hyprlandconfig/soundboard/2.mp3 & paplay --device=VirtualSink /opt/hyprlandconfig/soundboard/2.mp3

bind = SUPER ALT, 3, exec, paplay --device=MonitorSink /opt/hyprlandconfig/soundboard/3.mp3 & paplay --device=VirtualSink /opt/hyprlandconfig/soundboard/3.mp3
bind = SUPER ALT, 4, exec, paplay --device=MonitorSink /opt/hyprlandconfig/soundboard/4.mp3 & paplay --device=VirtualSink /opt/hyprlandconfig/soundboard/4.mp3
bind = SUPER ALT, 5, exec, paplay --device=MonitorSink /opt/hyprlandconfig/soundboard/5.mp3 & paplay --device=VirtualSink /opt/hyprlandconfig/soundboard/5.mp3
bind = SUPER ALT, 6, exec, paplay --device=MonitorSink /opt/hyprlandconfig/soundboard/6.mp3 & paplay --device=VirtualSink /opt/hyprlandconfig/soundboard/6.mp3
bind = SUPER ALT, 7, exec, paplay --device=MonitorSink /opt/hyprlandconfig/soundboard/7.mp3 & paplay --device=VirtualSink /opt/hyprlandconfig/soundboard/7.mp3
bind = SUPER ALT, 8, exec, paplay --device=MonitorSink /opt/hyprlandconfig/soundboard/8.mp3 & paplay --device=VirtualSink /opt/hyprlandconfig/soundboard/8.mp3

bind = SUPER ALT, 1, exec, /opt/hyprlandconfig/soundboard/start.sh && notify-send "Soundboard" "Soundboard iniciado"
bind = SUPER ALT, 0, exec, /opt/hyprlandconfig/soundboard/stop.sh && notify-send "Soundboard" "Soundboard parada"


##########################
# Atalhos: Screenshot
##########################

bind = SUPER, X, exec, grim /home/jorge/Imagens/screenshot-$(date +'%Y-%m-%d_%H-%M-%S').png && notify-send "Screenshot tirado!" "Imagem salva em /home/jorge/Imagens/"
bind = SUPER+SHIFT, X, exec, grim -g "$(slurp)" /home/jorge/Imagens/screenshot-$(date +'%Y-%m-%d_%H-%M-%S').png && notify-send "üì∏ Screenshot salvo!" "Imagem armazenada em /home/jorge/Imagens/"
bind = SUPER+SHIFT, L, exec, hyprctl keyword general:layout $( [ "$(hyprctl -j getoption general:layout | jq -r '.str')" = "master" ] && echo "dwindle" || echo "master" ) && notify-send "Layout Alternado"


##########################
# Regras de Janelas      #
##########################

windowrulev2 = tile, class:^(Brave-browser|crx_cinhimbnkkaeohfgghhklpknlkffjgod)$
windowrule   = tile, class:^(brave)$
windowrule   = tile, class:^(crx_cinhimbnkkaeohfgghhklpknlkffjgod)$
windowrulev2 = tile, class:freecad.exe
windowrulev2 = tile, class:Fightcade
windowrulev2 = tile, class:fcadefbneo.exe
windowrulev2 = tile, class:^(org.pulseaudio.pavucontrol)$

# MAGIC THE GATHERING ARENA
windowrulev2 = tile, class:^(steam_app_2141910)$

##########################
# Execu√ß√£o Inicial WS    #
##########################

exec = hyprctl dispatch workspace 1

##########################
# Corre√ß√£o de popups    #
##########################

windowrulev2 = float, title:^(Open File|Save As|Confirm)$
windowrulev2 = center, title:^(Open File|Save As|Confirm)$


# awakaned

# --- Configura√ß√£o Awakened PoE Trade (Sem PIN) ---

# 1. Flutuar √© obrigat√≥rio
windowrulev2 = float, class:^(awakened-poe-trade)$

# 2. Em vez de noinitialfocus, vamos for√ßar o foco ao ativar. 
# Isso ajuda o programa a "acordar" na segunda vez.
windowrulev2 = focusonactivate, class:^(awakened-poe-trade)$

# 3. Impede que o Hyprland mova a janela para o workspace 0 ou a esconda
windowrulev2 = workspace current, class:^(awakened-poe-trade)$

# 4. Remove sombras/blur para evitar bugs de transpar√™ncia no X11
windowrulev2 = noshadow, class:^(awakened-poe-trade)$
windowrulev2 = noblur, class:^(awakened-poe-trade)$